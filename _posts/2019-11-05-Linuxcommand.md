---  
layout: post  
title:  "Linux命令"  
date:  2019-11-05 09:34:12  
categories: ubuntu  
tags: ubuntu  
---  

* content  
{:toc}  

本文把之前所有用过的Linux命令都记录下来，随时更新，便于查阅  

### 命令格式  
命令 \[选项\] \[参数\]  
多个选项可以写在一起，比如 ```-a -h``` 可以合并为 ```-ah```  
选项可以简化，比如```--all```可以简写为```-a```  

### 文件及文件权限  
-rw-r--r--  
第一位：文件类型（-文件；d目录；l软链接文件；块设备文件；字符设备文件；套接字文件；管道文件）  
后面分为三组：分别是u所有者；g所属组；o其他人  
每一组分为三种权限：r读；w写；x执行  
##### 硬链接  
拥有相同的i节点和存储block块，可以看作同一个文件  
删除其中一个，另一个还存在  
一般只可通过i节点识别  
不能跨分区  
不能针对目录使用  
引用计数加一  
##### 软链接  
类似windows快捷方式   
软链接有自己的i节点和block，但是数据库中只保存原文件的文件名和i节点号，并没有实际数据  
修改任意文件，另一个也会改变  
删除源文件，软链接无法使用  

### 命令  
##### ls 查询目录内容  
-a 所有文件  
-l 详细信息  
-d 显示目录属性  
-h 人性化显示文件大小，显示为多少K  
-i 显示inode  

##### mkdir 创建目录  
-p 递归创建，可一次创建多级目录  

##### cd 切换当前目录  
cd ~ 家目录  
cd - 上次目录  

##### rmdir 删除空目录  

##### rm 删除文件或目录  
-r 删除目录  
-f 强制确认删除  

##### cp 复制目录  
-r 复制目录  
-p 连带文件属性复制，不会修改文件的修改时间   
-d 若源文件是链接文件，则复制链接属性  
-a 等于-pdr  

##### mv 移动目录或文件，改名  
同时对文件和目录进行移动  
如果在同一目录下移动，则可以进行改名  

##### ln 链接命令  
创建硬链接  
-s 创建软链接，除非在同一目录，否则源文件必须写绝对目录  

##### locate 文件名快速搜索命令  
在后台数据库```/var/lib/mlocate```中按文件名搜索，数据库一天一更新  
使用命令```updatedb```更新数据库  

配置文件/etc/updatedb.conf对某些目录有限制：  

```bash
PRUNE_BIND_MOUNT = "yes"  # yes表明该配置文件生效  
PRUNEFS = "afs autofs" # 不筛选这些文件系统  
PRUNENAMES = ".git .hg" # 不搜索文件名中包含这些关键字的文件  
PRUNEPATHS = "/media /net /tmp /var/tmp" # 不搜索这些目录  
```

##### whereis 系统命令及文档搜索  
显示系统命令的位置和命令的帮助文档位置  
shell内置命令如cd是找不到的  

##### which 系统命令及别名搜索  
显示系统命令和其别名  
shell内置命令如cd是找不到的  

##### alias 系统别名查询  
指定别名：```alias 别名='原命令'```  
```alias ll='ls -l --color=auto'```  
删除别名：```unalias 别名```  

##### find 文件搜索命令  
```find [搜索范围] [搜索条件]```  
如```find / -name a.x```  
通配符：*匹配任意内容；?匹配任一字符；[]匹配中括号中任意一个字符  
-iname 搜索文件名不区分大小写  
-user 搜索所有者的文件  
-nouser 搜索没有所有者的文件  
-mtime -10 10天内修改文件  
-mtime 10  10天当天修改的文件  
-mtime +10 10天前修改的文件  
-atime 10  10天当天访问的文件  
-ctime 10  10天当天改变文件属性  
-size  -25K 小于25K的文件(k M)  
-inum  262626 查找i节点  
-a and逻辑与  
-o or逻辑或  
想对搜索结果进行处理可以使用   
```-exec ls -lh {} \;```  
```-exec rm -rf {} \;```  

##### grep 字符串搜索命令  
在文件中搜索字符串所在的行 ```grep [选项] 字符串 文件名```  
-v 排除字符串  
-i 忽略大小写  
可通过正则表达式匹配文件内容  

##### man/--help 显示帮助  
man 命令  
man -f 查看帮助级别  
对单独命令可以使用--help  

##### help 显示shell内部命令帮助  
比如cd等内部命令  

##### info 显示系统帮助文档  
info会显示系统大部分命令的帮助，编成一个文档，可以上下翻阅相邻命令的帮助  

##### history 显示系统历史命令  
-c 清空历史命令  
-w 把缓存中的历史命令写入历史命令保存文件```~/.bash_history```  
历史命令默认保存条数在```/etc/profile```中修改```HISTSIZE```  
上下箭头调用之前的命令  
使用```!n```执行第n条历史命令  
使用```!!```再次执行上一条命令  
使用 ```!字符串```再次执行最后一条以该字符串开头的命令  

##### zip压缩解压  
```zip 压缩文件名 源文件```  
```zip -r 压缩文件名 源目录```  
```unzip 压缩文件```  

##### gz压缩解压  
```gzip 源文件``` 源文件会消失  
```gzip -c 源文件 > 压缩文件```保留源文件  
```gzip -r 目录```压缩目录下的每一个子文件，不合并成一个目录  
```gzip -d 压缩文件```解压缩  
```gunzip 压缩文件```解压缩  

##### bz2压缩解压  
```bzip2 源文件```压缩,不保了源文件  
```bzip2 -k 源文件```压缩保留源文件  
```bzip2 -d 压缩文件```解压缩,不保留压缩文件(加```-k```保留)  
```bunzip2 压缩文件```解压缩,不保了压缩文件(加```-k```保留)  
不能压缩目录  

##### tar 打包压缩文件  
```tar -cvf 打包文件名 源文件```  
-c 打包  
-x 解包  
-t 测试,不解压,只看文件内的内容  
-v 显示过程  
-f 指定打包后的文件名  
```tar -zcvf 压缩包名.tar.gz 源文件```一次性打包压缩  
```tar -zxvf 压缩包名.tar.gz```解压解包  
-z gz格式压缩解压  
-j bzip2格式压缩解压  
```tar -jxvf 压缩包名.tar.bz2 -C 目标目录```指定解压目录,注意```-C```只能写在后面  

##### shutdown/reboot 关机  
```shutdown [选项] 时间```  
-c 取消前一个关机命令  
-h 关机  
-r 重启  
时间可以是now,12:00这种时间  

reboot 重启计算机  
logout 用户退出登录  

##### mount挂载命令  
```/etc/fstab``` linux自动挂载配置文件  
-a 根据配置文件自动挂载  
```mount [-t 文件系统] [-o 特殊选项] 设备文件名 挂载点```  挂载点需是空目录   
文件系统:  
iso9660:光盘;ext3;ext4;vfat  
特殊选项:  
remount:重新挂载,一般用于重新设置特殊选项  
exec/noexec:是否允许文件系统中执行可执行文件,默认可以  
rw/ro:读写/只读,默认读写  
卸载命令 ```umount 设备名/挂载点```  

##### w 查看用户登录情况  
查看当前登录计算机的用户的信息  
TTY 登录终端  
LOGIN@ 登录时间  
IDLE 用户闲置时间  
PCPU 当前进程  
WHAT 当前运行命令  

##### last 查询当前登录和过去登录的用户信息  
默认读取/var/log/wtmp文件数据  
使用```lastlog```显示所有用户的最后一次登录的时间  

##### source 生效环境变量  
```bash  
source 配置文件  
. 配置文件  
```  